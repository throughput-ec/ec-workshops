{"data":{"site":{"siteMetadata":{"testTemplate":"success <- function(text) {\n    cat(paste(\"\\033[32m\", text, \"\\033[0m\", sep = \"\"))\n}\n\n.solution <- \"${solutionEscaped}\"\n\n${solution}\n\n${test}\ntryCatch({\n    test()\n}, error = function(e) {\n    cat(paste(\"\\033[31m\", e[1], \"\\033[0m\", sep = \"\"))\n})","juniper":{"repo":"throughput-ec/ec-workshops","branch":"binder","kernelType":"ir","lang":"r","debug":false}}},"allCode":{"edges":[{"node":{"name":"exc_05_01","code":"# Load libraries\nlibrary(gapminder)\nsuppressMessages(library(dplyr))\n\n# Use glimpse to do an overview of gapminder\nglimpse(gapminder)"}},{"node":{"name":"exc_05_03","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Selecting our rows\ngapminder_select <- select(gapminder, country, year, lifeExp, pop)\n\n# Printing the first few rows\nhead(gapminder_select)"}},{"node":{"name":"exc_05_06","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Filter rows where country is USA\ngapminder_usa <- gapminder %>%\n  filter(country == \"United States\")\n\nhead(gapminder_usa)"}},{"node":{"name":"exc_05_08","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Select your data\ngapminder_asia <- ________ %>%\n  filter(________ == ________, ________ __ 1975)\n\nhead(_________)"}},{"node":{"name":"exc_05_05","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Reorder the following code\n\nglimpse(result)\nresult <-\nselect(continent, gdpPercap, lifeExp, year)\n%>%\ngapminder"}},{"node":{"name":"exc_05_07","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Use filter() to obtain observations from USA\n# and where life expectancy greater than 75\ngapminder_usa_LE <- gapminder %>%\n  filter(country == \"United States\", lifeExp > 750)\n\nhead(gapminder_usa_LE)"}},{"node":{"name":"exc_05_02","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Selecting our rows\ngapminder_select <- select(gapminder, country, year, lifeExp, pop)\n\n# Exploring the new dataframe\nglimpse(gapminder_select)\n"}},{"node":{"name":"solution_05_01","code":"# Load libraries\nlibrary(gapminder)\nsuppressMessages(library(dplyr))\n\n# Use glimpse to do an overview of gapminder\nglimpse(gapminder)"}},{"node":{"name":"solution_05_02","code":"\n\n# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Selecting our rows\ngapminder_select <- select(gapminder, country, year, lifeExp, pop)\n\n# Exploring the new dataframe\nglimpse(gapminder_select)"}},{"node":{"name":"exc_05_10","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Piping multiple functions\ngapminder_multi <- gapminder %>%\n    select(country, year, lifeExp, pop, gdpPercap) %>%\n    filter(country == \"United States\", lifeExp > 75) %>%\n    mutate(gdp_total = gdpPercap * pop)\n\nhead(gapminder_multi)"}},{"node":{"name":"solution_05_08","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Select your data\ngapminder_asia <- gapminder %>%\n  filter(continent == \"Asia\", year >= 1975)\n\nhead(gapminder_asia)"}},{"node":{"name":"solution_05_05","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Reorder the following code\nresult <- gapminder %>%\n    select(continent, gdpPercap, lifeExp, year)\n\nglimpse(result)"}},{"node":{"name":"exc_05_04","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Pipe the gapminder data\ngapminder_pipe <- gapminder %>%\n# select only the columns of interest\n  select(country, year, lifeExp, pop)\n\n# Observe the characteristics of the new dataframe\nglimpse(gapminder_pipe)"}},{"node":{"name":"exc_05_09","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Creating a gdp column\ngapminder_gdp <- gapminder %>%\n  mutate(gdp_total = gdpPercap * pop)\n\n# Show the first rows with the added column\nhead(gapminder_gdp)"}},{"node":{"name":"exc_05_11","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Grouping by country and obtaining statistics.\ngapminder %>%\ngroup_by(country) %>%\nsummarise(LifeExp_max = max(lifeExp),\n          LifeExp_min = min(lifeExp),\n          LifeExp_avg = mean(lifeExp))"}},{"node":{"name":"exc_05_16","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\nggplot(gapminder, aes(gdpPercap, lifeExp, colour = continent)) +\n  geom_point(alpha = 0.5) +\n  scale_x_log10()"}},{"node":{"name":"exc_05_18","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Filtering countries\ngapminder_small <- gapminder %>%\n  filter(country %in% c(\"Canada\", \"United States\", \"France\", \"Australia\"))\n\n# Facet plot\nggplot(gapminder_small, aes(year, lifeExp, colour = continent)) +\n  geom_line() +\n  facet_wrap(~country)"}},{"node":{"name":"exc_05_15","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\nggplot(gapminder, aes(gdpPercap, lifeExp, colour = continent)) +\n  geom_point()"}},{"node":{"name":"exc_05_14","code":"# Loading the libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Organizing data to plot\ngapminder_data <- gapminder %>%\n    group_by(_______, ________) %>%\n    _________(lifeExp = mean(_______))\n\nggplot(_________, ______(x = _____, y = lifeExp, colour = _______)) +\n _________"}},{"node":{"name":"exc_05_17","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Plotting and fitting a linear model\nggplot(gapminder, aes(gdpPercap, lifeExp)) +\n  geom_point() +\n  scale_x_log10() +\n  geom_smooth(method = \"lm\")"}},{"node":{"name":"solution_05_14","code":"# Loading the libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Organizing data to plot\ngapminder_data <- gapminder %>%\n    group_by(continent, year) %>%\n    summarise(lifeExp = mean(lifeExp))\n\nggplot(gapminder_data, aes(x = year, y = lifeExp, colour = continent)) +\n geom_line()"}},{"node":{"name":"exc_05_12","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Grouping by country and obtaining statistics.\ngapminder %>%\n    filter(_________, _________) ____\n    _________(totalGDP = _________) ____\n    _________(country) %>%\n    _________(totalGDP_mean = _________, \n              totalGDP_sd = _________)"}},{"node":{"name":"solution_05_12","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Grouping by country and obtaining statistics.\ngapminder %>%\n    filter(continent == \"Americas\", year >= 2000) %>%\n    mutate(totalGDP = gdpPercap * pop) %>%\n    group_by(country) %>%\n    summarise(totalGDP_mean = mean(totalGDP),\n              totalGDP_sd = sd(totalGDP))"}},{"node":{"name":"exc_05_13","code":"# Loading libraries\nlibrary(gapminder)\nsuppressMessages(library(tidyverse))\n\n# Plotting gdpPercap vs lifeExp\nggplot(data = gapminder, aes(x = gdpPercap, y = lifeExp)) +\n  geom_point()"}},{"node":{"name":"exc_05_21","code":"# Loading libraries\nsuppressMessages(library(tidyverse))\nlibrary(gapminder)\n\ngapminder %>% \nfilter(year == \"2007\") %>% \nmutate(\n  pop2 = pop + 1,\n  continent = case_when(\n    continent == \"Oceania\" ~ \"Asia\",\n    TRUE ~ as.character(continent)\n  ) %>% as.factor %>% \n    fct_relevel(\"Asia\", \"Americas\", \"Europe\", \"Africa\")\n) %>% \nggplot(aes(x = gdpPercap, y = lifeExp)) +\n  geom_point(aes(size = pop, color = continent)) +\n  geom_point(aes(size = pop2), color = \"black\", shape = 21) +\n  scale_x_log10(breaks = c(500, 1000, 2000, 4000,\n                           8000, 16000, 32000, 64000)) +\n  scale_y_continuous(breaks = seq(0, 90, by = 10)) +\n  scale_color_manual(values = c(\"#F15772\", \"#7EEB03\",\n                                \"#FBE700\", \"#54D5E9\"))  +\n # Scale properly\n  scale_size_continuous(range = c(1, 30)) +\n  guides(size = FALSE, color = \"none\") +\n# Change labels\n  labs(\n    x = \"Income\",\n    y = \"Life expectancy\"\n  ) +\n  # Remove grey background\n  theme_minimal()"}},{"node":{"name":"exc_05_22","code":"# Loading libraries\nsuppressMessages(library(tidyverse))\nlibrary(gapminder)\nlibrary(countrycode)\n\n\nworld <- map_data(\"world\") %>%\n  filter(region != \"Antarctica\") %>% \n  mutate(\n    continent = countrycode(sourcevar = region,\n                            origin = \"country.name\",\n                            destination = \"continent\"),\n    continent = case_when(\n      continent == \"Oceania\" ~ \"Asia\",\n      TRUE ~ as.character(continent)\n    ) %>% as.factor %>% \n      fct_relevel(\"Asia\", \"Americas\", \"Europe\", \"Africa\")\n  ) %>% \n  drop_na(continent)\n\nglimpse(world, width = 50)"}},{"node":{"name":"exc_05_19","code":"# Loading libraries\nsuppressMessages(library(tidyverse))\nlibrary(gapminder)\n\ngapminder_cleaned <- gapminder %>%\nfilter(year == \"2007\") %>%\nmutate(\n  pop2 = pop + 1,\n  continent = case_when(\n    continent == \"Oceania\" ~ \"Asia\",\n    TRUE ~ as.character(continent)\n  ) %>% as.factor %>%\n    fct_relevel(\"Asia\", \"Americas\", \"Europe\", \"Africa\")\n)\n\nhead(gapminder_cleaned)"}},{"node":{"name":"exc_05_20","code":"# Loading libraries\nsuppressMessages(library(tidyverse))\nlibrary(gapminder)\n\ngapminder %>% \nfilter(year == \"2007\") %>% \nmutate(\n  pop2 = pop + 1,\n  continent = case_when(\n    continent == \"Oceania\" ~ \"Asia\",\n    TRUE ~ as.character(continent)\n  ) %>% as.factor %>% \n    fct_relevel(\"Asia\", \"Americas\", \"Europe\", \"Africa\")\n) %>% \nggplot(aes(x = gdpPercap, y = lifeExp)) +\n  geom_point(aes(size = pop, color = continent)) +\n  geom_point(aes(size = pop2), color = \"black\", shape = 21) +\n  scale_x_log10(breaks = c(500, 1000, 2000, 4000,\n                           8000, 16000, 32000, 64000)) +\n  scale_y_continuous(breaks = seq(0, 90, by = 10)) +\n  scale_color_manual(values = c(\"#f12248\", \"#5ca509\",\n                                \"#534d03\", \"#0522c5\")) "}}]}}}